<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <meta name="format-detection" content="telephone=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <title>javascript</title>
    <link charset="utf-8" type="text/css" rel="stylesheet" href="css/reset.min.css"/>
    <link charset="utf-8" type="text/css" rel="stylesheet" href="css/index.css"/>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="js/html5.min.js"></script>
    <![endif]-->
</head>
<body>
<section class="box" id="box">
    <div class="con">
        <!--头部-->
        <div class="top">
            <nav class="nav" id="nav">
                <ul class="clear">
                    <li class="bg"><a href="#">首页</a></li>
                    <li><a href="#">个人与家庭用户</a></li>
                    <li><a href="#">企业用户</a></li>
                    <li><a href="#">运营商用户</a></li>
                </ul>
            </nav>
            <header class="header" id="header">
                <div>
                    <img src="img/logo.png" class="logo"/>
                    <img src="img/top-lan.jpg" class="login"/>
                </div>
            </header>
            <header class="headerSmall" id="headerSmall">
                <div>
                    <img src="img/logo.png" class="logo"/>
                    <img src="img/menu.png" class="menu" id="navMenu"/>
                    <img src="img/search.png" class="search"/>
                </div>
            </header>
        </div>

        <!--产品列表-->
        <ul class="proList clear" id="proList">
            <li class="proLi1">
                <img src="img/has2016_1.jpg"/>

                <p class="title">推进“全面云化”战略，使能行业数字化转型</p>

                <p class="des">在2016年华为全球分析师大会上，华为轮值CEO徐直军向与会嘉宾解读了“全面云化”战略。</p>
            </li>
            <li class="proLi2">
                <img src="img/has2016_1.jpg"/>

                <p class="title">推进“全面云化”战略，使能行业数字化转型</p>

                <p class="des">在2016年华为全球分析师大会上，华为轮值CEO徐直军向与会嘉宾解读了“全面云化”战略。</p>
            </li>
            <li class="proLi3">
                <img src="img/has2016_1.jpg"/>

                <p class="title">推进“全面云化”战略，使能行业数字化转型</p>

                <p class="des">在2016年华为全球分析师大会上，华为轮值CEO徐直军向与会嘉宾解读了“全面云化”战略。</p>
            </li>
            <li class="proLi1">
                <img src="img/has2016_1.jpg"/>

                <p class="title">推进“全面云化”战略，使能行业数字化转型</p>

                <p class="des">在2016年华为全球分析师大会上，华为轮值CEO徐直军向与会嘉宾解读了“全面云化”战略。</p>
            </li>
            <li class="proLi2">
                <img src="img/has2016_1.jpg"/>

                <p class="title">推进“全面云化”战略，使能行业数字化转型</p>

                <p class="des">在2016年华为全球分析师大会上，华为轮值CEO徐直军向与会嘉宾解读了“全面云化”战略。</p>
            </li>
            <li class="proLi3">
                <img src="img/has2016_1.jpg"/>

                <p class="title">推进“全面云化”战略，使能行业数字化转型</p>

                <p class="des">在2016年华为全球分析师大会上，华为轮值CEO徐直军向与会嘉宾解读了“全面云化”战略。</p>
            </li>
            <li class="proLi1">
                <img src="img/has2016_1.jpg"/>

                <p class="title">推进“全面云化”战略，使能行业数字化转型</p>

                <p class="des">在2016年华为全球分析师大会上，华为轮值CEO徐直军向与会嘉宾解读了“全面云化”战略。</p>
            </li>
            <li class="proLi2">
                <img src="img/has2016_1.jpg"/>

                <p class="title">推进“全面云化”战略，使能行业数字化转型</p>

                <p class="des">在2016年华为全球分析师大会上，华为轮值CEO徐直军向与会嘉宾解读了“全面云化”战略。</p>
            </li>
            <li class="proLi3">
                <img src="img/has2016_1.jpg"/>

                <p class="title">推进“全面云化”战略，使能行业数字化转型</p>

                <p class="des">在2016年华为全球分析师大会上，华为轮值CEO徐直军向与会嘉宾解读了“全面云化”战略。</p>
            </li>
            <li class="proLi1">
                <img src="img/has2016_1.jpg"/>

                <p class="title">推进“全面云化”战略，使能行业数字化转型</p>

                <p class="des">在2016年华为全球分析师大会上，华为轮值CEO徐直军向与会嘉宾解读了“全面云化”战略。</p>
            </li>
            <li class="proLi2">
                <img src="img/has2016_1.jpg"/>

                <p class="title">推进“全面云化”战略，使能行业数字化转型</p>

                <p class="des">在2016年华为全球分析师大会上，华为轮值CEO徐直军向与会嘉宾解读了“全面云化”战略。</p>
            </li>
            <li class="proLi3">
                <img src="img/has2016_1.jpg"/>

                <p class="title">推进“全面云化”战略，使能行业数字化转型</p>

                <p class="des">在2016年华为全球分析师大会上，华为轮值CEO徐直军向与会嘉宾解读了“全面云化”战略。</p>
            </li>
        </ul>
    </div>
    <div class="rightMenu" id="rightMenu">
        <h2>
            <span>首页</span>
            <i id="rightMenuClose"></i>
        </h2>
        <ul>
            <li>个人与家庭用户<i></i></li>
            <li>企业用户<i></i></li>
            <li>运营商用户<i></i></li>
            <li>行业洞察</li>
            <li>解决方法</li>
            <li>服务与产品</li>
            <li>技术支持</li>
        </ul>
    </div>
</section>
<script charset="utf-8" type="text/javascript" src="js/fastClick.js"></script>
<script type="text/javascript">
    //->在PC端的点击事件使用CLICK,但是在移动端点击事件使用CLICK有一个问题：当点击触发的时候到浏览器反映过来执行对应绑定的方法,会存在一个300ms延迟的问题(因为移动端的浏览器有一个机制,它会在第一次触发结束后等到300ms,看是否还有第二次的触发,如果有的话是双击而不是单击,没有的话才认为是单击CLICK)
    //->为了解决移动端使用click带来的延迟问题,我们可以调用fastClick.js这个插件
    var myFast = FastClick.attach(document.body);//->把页面中所有用click事件用touch事件模型代替，从而解决300ms延迟问题

    var oBox = document.getElementById("box"),
            navMenu = document.getElementById("navMenu"),
            rightMenu = document.getElementById("rightMenu"),
            rightMenuClose = document.getElementById("rightMenuClose");
    var proList = document.getElementById("proList"),
            proLis = proList.getElementsByTagName("li"),
            imgList = proList.getElementsByTagName("img");
    var nav = document.getElementById("nav"),
            header = document.getElementById("header"),
            headerSmall = document.getElementById("headerSmall");

    rightMenuClose.onclick = function () {
        oBox.style.left = "0";
        rightMenu.style.boxShadow = "";
        navMenu.flag = false;
        document.body.style.overflowY = "auto";
    };
    navMenu.onclick = function () {
        //->让其隐藏
        if (this.flag) {
            oBox.style.left = "0";
            rightMenu.style.boxShadow = "";
            this.flag = false;
            document.body.style.overflowY = "auto";
            return;
        }
        //->让其显示
        var winW = document.documentElement.clientWidth || document.body.clientWidth;
        if (winW <= 770) {
            oBox.style.left = "-100%";
            return;
        }
        oBox.style.left = "-50%";
        rightMenu.style.boxShadow = "-5px 0 10px 0 #ddd";
        this.flag = true;
        document.body.style.overflowY = "hidden";
    };

    window.onresize = function () {
        var winW = document.documentElement.clientWidth || document.body.clientWidth;
        //->在IE6~8下需要把所有用@media实现的在JS中实现一遍,因为@media不兼容
        if (/MSIE\s+(6|7|8)/i.test(window.navigator.userAgent)) {
            if (winW <= 960) {
                nav.style.display = header.style.display = "none";
                headerSmall.style.display = "block";
            } else {
                nav.style.display = header.style.display = "block";
                headerSmall.style.display = "none";
            }

            if (winW <= 770) {
                rightMenu.style.right = "-100%";
                rightMenu.style.width = "100%";

                proList.style.margin = "0 15px";
                for (var i = 0; i < proLis.length; i++) {
                    proLis[i].style.width = "100%";
                    proLis[i].style.padding = "0";
                }
            } else {
                rightMenu.style.right = "-50%";
                rightMenu.style.width = "50%";

                proList.style.margin = "0 4%";
                for (var i = 0; i < proLis.length; i++) {
                    proLis[i].style.width = "30.333%";
                    if (i % 3 === 0) {
                        proLis[i].style.paddingRight = "3%";
                    } else if (i % 3 === 2) {
                        proLis[i].style.paddingLeft = "3%";
                    } else {
                        proLis[i].style.padding = "0 1.5%";
                    }
                }
            }
        }
        changeImgHeight();
    };

    //->控制页面中的图片随着屏幕的缩放宽高进行适配
    changeImgHeight();
    function changeImgHeight() {
        var scale = 360 / 284;
        for (var i = 0; i < imgList.length; i++) {
            var curImg = imgList[i];
            var curImgW = getCss(curImg, "width");
            curImg.style.height = curImgW / scale + "px";
        }
    }

    function getCss(curEle, attr) {
        //->我们给元素设置一个百分比宽度,标准浏览器获取的值是经过计算的PX值,而IE6~8下获取的是设置的百分比值
        if (window.getComputedStyle) {
            return parseFloat(window.getComputedStyle(curEle, null)[attr]);
        }
        var winW = document.documentElement.clientWidth || document.body.clientWidth;
        if (winW > 770) {
            return (winW - winW * 0.08) * 0.30333;
        }
        return winW - 15 - 15;
    }
</script>
</body>
</html>