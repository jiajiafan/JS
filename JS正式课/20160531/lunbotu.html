<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css.css" type="text/css">
</head>
<body>
<div id="box" class="box">
    <div class="imgWrap">
        <div><img src="img/banner1.jpg" alt=""></div>
        <div><img src="img/banner2.jpg" alt=""></div>
        <div><img src="img/banner3.jpg" alt=""></div>
        <div><img src="img/banner4.jpg" alt=""></div>
    </div>
    <ul>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
    <a href="javascript:;" class="btnL"><</a>
    <a href="javascript:;" class="btnR">></a>
</div>
<script src="../utils.js"></script>
<script src="../练习/move.js"></script>
<script>
   var oBox=document.getElementById('box');
   var oImgWrap=oBox.getElementsByTagName('div')[0];
    var aDiv=oImgWrap.getElementsByTagName('div');
    var aImg=oImgWrap.getElementsByTagName('img');
    var oUl=oBox.getElementsByTagName('ul')[0];
    var aLi=oUl.getElementsByTagName('li');
    var btnL=oBox.getElementsByTagName('a')[0];
    var btnR=oBox.getElementsByTagName('a')[1];
   var step=0;
   var autoTimer=null;
   utils.setCss(aDiv[0],'zIndex',1);
   zhufengAnimate(aDiv[0],{'opacity':1},600);
    autoTimer=setInterval(autoMove,2000);
    function autoMove(){
        if(step>=aDiv.length-1){
            step=-1;
        }
        step++;
        setBanner();
    }
    function setBanner(){
        for(var i=0;i<aDiv.length;i++){
            var curDiv=aDiv[i];
            if(i==step){
              utils.setCss(curDiv,'zIndex',1);
                zhufengAnimate(curDiv,{'opacity':1},function(){
                    var siblings=utils.siblings(this);
                    for(var i=0;i<siblings.length;i++){
                        utils.setCss(siblings[i],'opacity',0)
                    }
                },600);
                continue;
            }
            utils.setCss(curDiv,"zIndex",0);
        }
        bannerTip();
    }
    function bannerTip(){
        for(var i=0;i<aLi.length;i++){
            var curLi=aLi[i];
            i==step?curLi.className='bg':curLi.className='';
        }
    }
    oBox.onmousemover=function(){
        clearInterval(autoTimer);
        btnL.style.display="block";
        btnR.style.display="block";
    };
   oBox.onmousemout=function(){
       autoTimer=setInterval(autoMove,2000);
       btnL.style.display="none";
       btnR.style.display="none";
   };
   handleChange();
   function handleChange(){
       for(var i=0;i<aLi.length;i++){
           var curLi=aLi[i];
           curLi.index=i;
           curLi.onclick=function(){
              step=this.index;
               setBanner();
           }
       }
   }
    btnR.onclick=autoMove;
    btnL.onclick=function(){
        if(step<=0){
            step=aDiv.length;
        }
        step--;
        setBanner();
    }


</script>
</body>
</html>